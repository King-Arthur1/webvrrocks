import Firebase from 'firebase'
import eventStream from '.'

const ref = new Firebase('https://firequeue-test.firebaseio.com/')
const events = [ 'child_added' ]

ref.remove()

const stream = eventStream(ref, { events })
  .on('data', ({ event, child }) => console.log('emitted ', event, child.val()))

setTimeout((() => ref.push({ foo: 1 })), 10)
setTimeout((() => ref.push({ foo: 2 })), 20)

setTimeout((() => stream.destroy()), 30)

setTimeout((() => ref.push({ foo: 3 })), 40)